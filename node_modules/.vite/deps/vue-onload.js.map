{
  "version": 3,
  "sources": ["../../vue-onload/dist/index.js"],
  "sourcesContent": ["\"use strict\";\n/**\n * A lightweight image loader plugin for Vue.js\n *\n * @version 3.0.1\n * @author Charlie LEDUC <contact@graphique.io>\n * @license ISC\n * @requires 'vue'\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.plugin = exports.preload = void 0;\nfunction _load(resource, callback) {\n    var _img = new Image();\n    _img.onload = function () {\n        callback(_img);\n    };\n    _img.src = resource;\n}\nfunction _set(source, target) {\n    target.src = source.src;\n    target.width = source.width;\n    target.height = source.height;\n    var list = ['img-square', 'img-portrait', 'img-landscape'];\n    list.forEach(function (c) {\n        target.classList.remove(c);\n    });\n    var aspectClass = 'img-square';\n    if (source.width < source.height) {\n        aspectClass = 'img-portrait';\n    }\n    else {\n        if (source.width / source.height >= 10 / 9) {\n            aspectClass = 'img-landscape';\n        }\n    }\n    if (!target.classList.contains(aspectClass)) {\n        target.classList.add(aspectClass);\n    }\n    target.removeAttribute('data-src');\n}\nfunction _directiveFn(el, binding) {\n    var resource = binding.value;\n    if (resource === el.src) {\n        return;\n    }\n    el.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    el.setAttribute('data-src', resource);\n    _load(resource, function (img) {\n        _set(img, el);\n    });\n}\nfunction preload(images, callback) {\n    var l = images.length;\n    var n = 0;\n    var completed = false;\n    if (images.length) {\n        for (var i = 0; i < images.length; i++) {\n            var resource = images[i];\n            _load(resource, function (img) {\n                n++;\n                if (typeof callback === 'function') {\n                    callback(completed, n / l);\n                    if (n >= l) {\n                        completed = true;\n                        callback(completed, 1);\n                    }\n                }\n            });\n        }\n    }\n    else {\n        if (typeof callback === 'function') {\n            completed = true;\n            callback(completed, 1);\n        }\n    }\n}\nexports.preload = preload;\nvar plugin = {\n    install: function (app) {\n        var options = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            options[_i - 1] = arguments[_i];\n        }\n        app.directive('onload', {\n            mounted: function (el, binding, vnode) {\n                if (vnode.type !== 'img') {\n                    console.warn('Current node is not an image!');\n                    return;\n                }\n                _directiveFn(el, binding);\n            },\n            updated: function (el, binding, vnode) {\n                if (vnode.type !== 'img') {\n                    console.warn('Current node is not an image!');\n                    return;\n                }\n                _directiveFn(el, binding);\n            }\n        });\n    }\n};\nexports.plugin = plugin;\n"],
  "mappings": ";;;;;AAAA;AAAA;AASA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,YAAQ,SAAS,QAAQ,UAAU;AACnC,aAAS,MAAM,UAAU,UAAU;AAC/B,UAAI,OAAO,IAAI,MAAM;AACrB,WAAK,SAAS,WAAY;AACtB,iBAAS,IAAI;AAAA,MACjB;AACA,WAAK,MAAM;AAAA,IACf;AACA,aAAS,KAAK,QAAQ,QAAQ;AAC1B,aAAO,MAAM,OAAO;AACpB,aAAO,QAAQ,OAAO;AACtB,aAAO,SAAS,OAAO;AACvB,UAAI,OAAO,CAAC,cAAc,gBAAgB,eAAe;AACzD,WAAK,QAAQ,SAAU,GAAG;AACtB,eAAO,UAAU,OAAO,CAAC;AAAA,MAC7B,CAAC;AACD,UAAI,cAAc;AAClB,UAAI,OAAO,QAAQ,OAAO,QAAQ;AAC9B,sBAAc;AAAA,MAClB,OACK;AACD,YAAI,OAAO,QAAQ,OAAO,UAAU,KAAK,GAAG;AACxC,wBAAc;AAAA,QAClB;AAAA,MACJ;AACA,UAAI,CAAC,OAAO,UAAU,SAAS,WAAW,GAAG;AACzC,eAAO,UAAU,IAAI,WAAW;AAAA,MACpC;AACA,aAAO,gBAAgB,UAAU;AAAA,IACrC;AACA,aAAS,aAAa,IAAI,SAAS;AAC/B,UAAI,WAAW,QAAQ;AACvB,UAAI,aAAa,GAAG,KAAK;AACrB;AAAA,MACJ;AACA,SAAG,MAAM;AACT,SAAG,aAAa,YAAY,QAAQ;AACpC,YAAM,UAAU,SAAU,KAAK;AAC3B,aAAK,KAAK,EAAE;AAAA,MAChB,CAAC;AAAA,IACL;AACA,aAAS,QAAQ,QAAQ,UAAU;AAC/B,UAAI,IAAI,OAAO;AACf,UAAI,IAAI;AACR,UAAI,YAAY;AAChB,UAAI,OAAO,QAAQ;AACf,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,cAAI,WAAW,OAAO;AACtB,gBAAM,UAAU,SAAU,KAAK;AAC3B;AACA,gBAAI,OAAO,aAAa,YAAY;AAChC,uBAAS,WAAW,IAAI,CAAC;AACzB,kBAAI,KAAK,GAAG;AACR,4BAAY;AACZ,yBAAS,WAAW,CAAC;AAAA,cACzB;AAAA,YACJ;AAAA,UACJ,CAAC;AAAA,QACL;AAAA,MACJ,OACK;AACD,YAAI,OAAO,aAAa,YAAY;AAChC,sBAAY;AACZ,mBAAS,WAAW,CAAC;AAAA,QACzB;AAAA,MACJ;AAAA,IACJ;AACA,YAAQ,UAAU;AAClB,QAAI,SAAS;AAAA,MACT,SAAS,SAAU,KAAK;AACpB,YAAI,UAAU,CAAC;AACf,iBAAS,KAAK,GAAG,KAAK,UAAU,QAAQ,MAAM;AAC1C,kBAAQ,KAAK,KAAK,UAAU;AAAA,QAChC;AACA,YAAI,UAAU,UAAU;AAAA,UACpB,SAAS,SAAU,IAAI,SAAS,OAAO;AACnC,gBAAI,MAAM,SAAS,OAAO;AACtB,sBAAQ,KAAK,+BAA+B;AAC5C;AAAA,YACJ;AACA,yBAAa,IAAI,OAAO;AAAA,UAC5B;AAAA,UACA,SAAS,SAAU,IAAI,SAAS,OAAO;AACnC,gBAAI,MAAM,SAAS,OAAO;AACtB,sBAAQ,KAAK,+BAA+B;AAC5C;AAAA,YACJ;AACA,yBAAa,IAAI,OAAO;AAAA,UAC5B;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ;AACA,YAAQ,SAAS;AAAA;AAAA;",
  "names": []
}
